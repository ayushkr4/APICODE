package v2api_Utilities;


import static org.testng.Assert.assertEquals;
import io.restassured.RestAssured;
import io.restassured.http.Method;
import v2api_base.Api_base;



public class PanGenerators extends Api_base{
	static String Token = "f52e01fba3341e14acf772f4e9db418dc84733fac1291af2392a380be5b840";
	public static String Attachpan(String Flow) {
	String Pancard = RandomStringGenerator.generateRandomString(5)+"0002M"; 
	//System.out.println(Pancard);
	Pancard = addPantoDB(Pancard);
	Pancard = addCibil(Pancard);
	Pancard = Addcreditvidya(Pancard, Flow);
	return Pancard;
	}
	
	
	public static String addPantoDB(String panvalue) {
		RestAssured.baseURI = "https://uat-mock.incred.com";
		httprequest = RestAssured.given();
		httprequest.header("x-access-token", Token);
		httprequest.contentType("application/json");
		
		httprequest.body("{\"DATA\":{\"detail\":{\"pandetails\":{\"Code\": 200,\"LastUpdate\": \"25/09/2016\",\"Name\": \"Mohit Kumar Verma\",\"PanNumber\":\"LOCPL0015D\",\"Status\":\"Active\"}},\"message\":\"Valid Pan\",\"status\":true},"
				+ "\"PAN_CARD\": \""+panvalue+"\"}");
		
		Response=httprequest.request(Method.POST,"/pan");
		assertEquals(Response.getStatusCode(), 200);
		//System.out.println(Response.getBody().asString());
		return panvalue;
	}
		public static String addCibil(String panvalue) {
		httprequest = RestAssured.given();
		httprequest.header("x-access-token", Token);
		httprequest.contentType("application/json");
        httprequest.body("{\"DATA\":{\"ACKNOWLEDGEMENT-ID\":62038588,\"APPLICATION_ID\":\"8284093906516025A\",\"BUREAU\":{\"CIBIL\":{\"DATA\":{\"accountList\":[{\"accountType\":\"05\",\"currentBalance\":\"10000\",\"dateOpenedOrDisbursed\":\"24012017\",\"dateReportedAndCertified\":\"14042018\",\"overdueAmount\":\"9999\",\"ownershipIndicator\":\"1\",\"paymentHistory1\":\"000000000000000000000000000000000000000\",\"paymentHistoryEndDate\":\"01062017\",\"paymentHistoryStartDate\":\"17042019\",\"reportingMemberShortName\":\"NOT DISCLOSED\",\"typeOfCollateral\":\"00\"}],\"addressList\":[{\"addressCategory\":\"04\",\"addressLine1\":\"TY BUSINESS YY\",\"addressLine2\":\"Y 17TH Y DM PARK SV ROAD\",\"addressLine3\":\"YYY W\",\"addressLine5\":\"YY\",\"dateReported\":\"09042017\",\"enrichedThroughtEnquiry\":\"Y\",\"pinCode\":\"400064\",\"stateCode\":\"27\"}],\"employmentList\":[{\"accountType\":\"05\",\"dateReported\":\"30062017\",\"occupationCode\":\"01\"}],\"enquiryList\":[{\"dateReported\":\"21032019\",\"enquiryAmount\":\"10000\",\"enquiryPurpose\":\"10\",\"reportingMemberShortName\":\"NOT DISCLOSED\"},{\"dateReported\":\"10122012\",\"enquiryAmount\":\"75000\",\"enquiryPurpose\":\"13\",\"reportingMemberShortName\":\"NOT DISCLOSED\"}],\"header\":{\"dateProceed\":\"29072017\",\"enquiryControlNumber\":\"001660275795\",\"enquiryMemberUserID\":\"NB77615555_C2C\",\"memberReferenceNumber\":\"37794729\",\"subjectReturnCode\":\"1\",\"timeProceed\":\"145410\",\"version\":\"12\"},\"idList\":[{\"idType\":\"01\",\"idValue\":\"BPY00150P\"},{\"idType\":\"06\",\"idValue\":\"778930428179\"},{\"idType\":\"EMAIL\",\"idValue\":\"RR@YAHOO.COM\"}],\"name\":{\"dob\":\"13081991\",\"gender\":\"2\",\"name1\":\"R R R\"},\"phoneList\":[{\"telephoneNumber\":\"000229619876879\",\"telephoneType\":\"02\"},{\"enrichEnquiryForPhone\":\"Y\",\"telephoneNumber\":\"70454932\",\"telephoneType\":\"03\"},{\"telephoneNumber\":\"09619876879\",\"telephoneType\":\"00\"},{\"telephoneNumber\":\"9619876879\",\"telephoneType\":\"01\"}],\""
        		+ "List\":[{\"exclusionCode10\":\"01\",\"reasonCode1\":\"14\",\"reasonCode2\":\"07\",\"score\":\"00800\",\"scoreCardName\":\"04\",\"scoreCardVersion\":\"10\",\"scoreDate\":\"29072017\",\"scoreName\":\"CIBILTUSC2\"}]},\"PDF_URL\":[\"743177d69a03f08df1f6f81207693a13/82e79b29080be7571b8743b8ead98fd9\"],\"PRODUCT\":\"CIR\",\"STATUS\":\"SUCCESS\",\"TRACKING-ID\":14262198},\"EXPERIAN\":{\"DATA\":{\"caisAccount\":{\"caisAccountDetails\":[{\"accountHoldertypeCODE\":\"2\",\"accountNumber\":\"XXXXXXXXXX\",\"accountStatus\":\"13\",\"accountType\":\"13\",\"amountPastDue\":\"0\",\"caisAccountHistoryList\":[{\"assetClassification\":\"?\",\"daysPastDue\":\"0\",\"month\":\"08\",\"year\":\"2016\"},{\"assetClassification\":\"?\",\"daysPastDue\":\"0\",\"month\":\"07\",\"year\":\"2016\"},{\"assetClassification\":\"?\",\"daysPastDue\":\"0\",\"month\":\"06\",\"year\":\"2016\"},{\"assetClassification\":\"?\",\"daysPastDue\":\"361\",\"month\":\"05\",\"year\":\"2016\"},{\"assetClassification\":\"B\",\"daysPastDue\":\"330\",\"month\":\"04\",\"year\":\"2016\"},{\"assetClassification\":\"B\",\"daysPastDue\":\"300\",\"month\":\"03\",\"year\":\"2016\"},{\"assetClassification\":\"B\",\"daysPastDue\":\"269\",\"month\":\"02\",\"year\":\"2016\"},{\"assetClassification\":\"B\",\"daysPastDue\":\"240\",\"month\":\"01\",\"year\":\"2016\"},{\"assetClassification\":\"B\",\"daysPastDue\":\"209\",\"month\":\"12\",\"year\":\"2015\"},{\"assetClassification\":\"B\",\"daysPastDue\":\"178\",\"month\":\"11\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"148\",\"month\":\"10\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"117\",\"month\":\"09\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"87\",\"month\":\"08\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"56\",\"month\":\"07\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"25\",\"month\":\"06\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"05\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"25\",\"month\":\"04\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"03\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"23\",\"month\":\"02\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"01\",\"year\":\"2015\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"12\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"56\",\"month\":\"11\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"56\",\"month\":\"10\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"56\",\"month\":\"09\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"08\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"07\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"25\""
        		+ ",\"month\":\"06\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"05\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"25\",\"month\":\"04\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"03\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"23\",\"month\":\"02\",\"year\":\"2014\"},"
        		+ "{\"assetClassification\":\"S\",\"daysPastDue\":\"26\",\"month\":\"01\",\"year\":\"2014\"},{\"assetClassification\":\"S\",\"month\":\"12\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"11\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"10\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"09\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"08\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"07\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"4\",\"month\":\"06\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"daysPastDue\":\"14\",\"month\":\"05\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"04\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"03\",\"year\":\"2013\"},{\"assetClassification\":\"S\",\"month\":\"01\",\"year\":\"2013\"}],\"caisHolderAddressDetailsList\":[{\"countryCodenonNormalized\":\"IB\",\"firstLineOfAddressNonNormalized\":\"H 13 R AGHADI R YARI R VERSOV\",\"secondLineOfAddressNonNormalized\":\"A R WEST R\",\"stateNonNormalized\":\"27\",\"zipPostalCodeNonNormalized\":\"400053\"},{\"countryCodenonNormalized\":\"IB\",\"firstLineOfAddressNonNormalized\":\"R MALL R NO 65 1ST R CHIN\",\"secondLineOfAddressNonNormalized\":\"R R R R SPACE MALAD W\",\"stateNonNormalized\":\"27\",\"thirdLineOfAddressNonNormalized\":\"MUMBAI\",\"zipPostalCodeNonNormalized\":\"400064\"},{\"countryCodenonNormalized\":\"IB\",\"firstLineOfAddressNonNormalized\":\"R MALL UNIT NO 65 1ST R CHIN\",\"secondLineOfAddressNonNormalized\":\"CHOLI R R R SPACE MALAD W\",\"thirdLineOfAddressNonNormalized\":\"MUMBAI\",\"zipPostalCodeNonNormalized\":\"400064\"},{\"countryCodenonNormalized\":\"IB\",\"firstLineOfAddressNonNormalized\":\"H 13 R AGHADI NAGAR R ROAD VERSOV\",\"secondLineOfAddressNonNormalized\":\"A R R MUMBAI\",\"zipPostalCodeNonNormalized\":\"400053\"}],\"caisHolderDetailsList\":[{\"dateOfBirth\":\"19910813\",\"genderCode\":\"1\",\"incomeTaxPan\":\"BPYPK7150P\",\"middleName1NonNormalized\":\"ANIL\",\"surnameNonNormalized\":\"R R KHOPKAR\"}],\"caisHolderIdDetails\":{\"incomeTaxPan\":\"BPY00150P\"},\"caisHolderPhoneDetailsList\":[{\"telephoneNumber\":\"9619876879\",\"telephoneType\":\"02\"},{\"telephoneNumber\":\"9619876879\"}],\"currencyCode\":\"INR\",\"currentBalance\":\"0\",\"dateClosed\":\"20160816\",\"dateOfAddition\":\"20130131\",\"dateOfLastPayment\":\"20160629\",\"dateReported\":\"20160831\",\"highestCreditOrOrignalLoanAmount\":\"48399\",\"identificationNumber\":\"NBFXXXXXXXX\",\"openDate\":\"20121229\",\"paymentHistoryProfile\":\"0066666654321000000011100000000SSSSS\",\"paymentRating\":\"0\",\"portfolioType\":\"I\",\"repaymentTenure\":\"29\",\"subscriberName\":\"XXXXXXXXXX\",\"termsDuration\":\"29\",\"termsFrequency\":\"M\"},{\"accountHoldertypeCODE\":\"1\",\"accountNumber\":\"XXXXXXXXXX\",\"accountStatus\":\"11\",\"accountType\":\"05\",\"amountPastDue\":\"0\",\"caisAccountHistoryList\":[{\"assetClassification\":\"S\",\"daysPastDue\":\"0\",\"month\":\"06\",\"year\":\"2017\"}],\"caisHolderAddressDetailsList\":[{\"countryCodenonNormalized\":\"IB\",\"firstLineOfAddressNonNormalized\":\"H-13  3RD BPY00150PBPY00150PBPY00150P   BPY00150P JAHAN CHS  YARI\",\"secondLineOfAddressNonNormalized\":\"ROAD   BPY00150PBPY00150P WEST\",\"stateNonNormalized\":\"27\",\"zipPostalCodeNonNormalized\":\"400061\"}],\"caisHolderDetailsList\":[{\"dateOfBirth\":\"19910813\",\"genderCode\":\"1\",\"incomeTaxPan\":\"BPYPK7150P\",\"surnameNonNormalized\":\"AMAAN KHOPKAR\"}],\"caisHolderIdDetails\":{\"incomeTaxPan\":\"BPYPK7150P\"},\"caisHolderPhoneDetailsList\":[{\"telephoneNumber\":\"9619876879\",\"telephoneType\":\"02\"}],\"currencyCode\":\"INR\",\"currentBalance\":\"0\",\"dateOfAddition\":\"20170630\",\"dateReported\":\"20170630\",\"highestCreditOrOrignalLoanAmount\":\"20000\",\"identificationNumber\":\"NBFXXXXXXXX\",\"openDate\":\"20170624\",\"paymentHistoryProfile\":\"N\",\"paymentRating\":\"0\",\"portfolioType\":\"I\",\"repaymentTenure\":\"0\",\"subscriberName\":\"XXXXXXXXXX\"}],\"caisSummary\":{\"creditAccount\":{\"CADSuitFiledCurrentBalance\":\"0\",\"creditAccountActive\":\"1\",\"creditAccountClosed\":\"1\",\"creditAccountDefault\":\"0\",\"creditAccountTotal\":\"2\"},\"totalOutStandingBalance\":{\"outstandingBalanceAll\":\"0\",\"outstandingBalanceSecured\":\"0\",\"outstandingBalanceSecuredPercentage\":\"0\",\"outstandingBalanceUnsecured\":\"0\",\"outstandingBalanceUnsecuredPercentage\":\"0\"}}},\"caps\":{\"capsApplicationDetailList\":[{\"amountFinanced\":\"1\",\"capsApplicantAddressDetails\":{\"bldgNoSocietyName\":\"ROAD,OPP CWC SCHOOL,VERSOVA\",\"city\":\"Mumbai\",\"countryCode\":\"IB\",\"flatNoPlotNoHouseNo\":\"H-13,APNA JAHAN CHS ANDHERI-WEST YARI\",\"landmark\":\"CWC SCHOOL,\",\"pinCode\":\"400061\",\"state\":\"27\"},\"capsApplicantDetails\":{\"dateOfBirthapplicant\":\"19910813\",\"firstname\":\"AMAN\",\"genderCode\":\"1\",\"incomeTaxPan\":\"BPYPK7150P\",\"lastName\":\"KHOPKAR\",\"middleName1\":\"ANIL\",\"telephoneNumberApplicant1st\":\"9619876879\",\"telephonetype\":\"00\"},\"capsOtherDetails\":{},\"dateOfRequest\":\"20170512\",\"durationOfAgreement\":\"30\",\"enquiryReason\":\"99\",\"financePurpose\":\"1\",\"reportNumber\":\"1494532120715\",\"reportTime\":\"145413\",\"subscriberCode\":\"NBFXXXXXXXX\",\"subscriberName\":\"XXXXXXXXXX\"}],\"capsSummary\":{\"capsLast180Days\":\"2\",\"capsLast30Days\":"
        		+ "\"0\",\"capsLast7Days\":\"0\",\"capsLast90Days\":\"1\"}},\"creditProfileHeader\":{\"enquiryUserName\":\"visu01cpu\",\"reportDate\":\"20170729\",\"reportNumber\":\"1501320253128\",\"reporttime\":\"145413\",\"subscriberName\":\"Visu Leasing And Finance Private Limited\",\"version\":\"V2.4\"},\"currentApplication\":{\"currentApplicationDetails\":{\"amountFinanced\":\"600000\",\"currentApplicantAddressDetails\":{\"bldgNumberSocietyName\":\"yari road opp CWC school versova\",\"city\":\"Mumbai\",\"countryCode\":\"IB\",\"flatNoPlotNoHouseNo\":\"H-13 Apna jahan CHS Zohra aghadi nagar\",\"pinCode\":\"400061\",\"roadNumbernameAreaLocality\":\"BPY00150PBPY00150P west BPY00150P maharash\",\"state\":\"27\"},\"currentApplicantdetails\":{\"dateofBirthApplicant\":\"19910813\",\"firstName\":\"Aman\",\"genderCode\":\"1\",\"incometaxPan\":\"BPY00150P\",\"lastName\":\"Khopar\",\"telephoneNumberApplicant1st\":\"9619876879\",\"telephoneType\":\"01\"},\"currentOtherDetails\":{},\"durationOfAgreement\":\"36\",\"enquiryReason\":\"13\"}},\"header\":{\"reportDate\":\"20170729\",\"reportTime\":\"145413\",\"systemCode\":\"0\"},\"matchResult\":{\"exactMatch\":\"Y\"},\"score\":{\"bureauScore\":\"0800\",\"bureauScoreConfidLevel\":\"H\"},\"totalCAPSSummary\":{\"totalCAPSLast180Days\":\"3\",\"totalCAPSLast30Days\":\"1\",\"totalCAPSLast7Days\":\"1\",\"totalCAPSLast90Days\":\"2\"},\"userMessage\":{\"userMessageText\":\"Normal Response\"}},\"PDF_URL\":[\"743177d69a03f08df1f6f81207693a13/98babcd775bfd8b802c20dd0b0495b3b\"],\"PRODUCT\":\"CIR\",\"STATUS\":\"SUCCESS\",\"TRACKING-ID\":14262199}},\"CUSTOMER_ID\":\"1900520231051017C\",\"EPOCH\":1501320257065,\"HEADER\":{\"APPLICATION-ID\":\"8284093906516025A\",\"CUST-ID\":\"1900520231051017C\",\"REQUEST-RECEIVED-TIME\":\"29072017 14:54:16\",\"RESPONSE-TYPE\":\"RESPONSE\"}},\"PAN_CARD\":\""+panvalue+"\"}");
		httprequest.request(Method.POST,"/cibil");
		assertEquals(Response.getStatusCode(), 200);
		//System.out.println(Response.getBody().asString());
		return panvalue;
		
	}
	public static String Addcreditvidya(String panvalue, String FlowType) {
		httprequest = RestAssured.given();
		httprequest.header("x-access-token", Token);
		httprequest.contentType("application/json");
		
		if(FlowType.equalsIgnoreCase("yellow"))
{
			httprequest.body("{\"DATA\":{\"AVG_PRIMARY_ACCOUNT\":2400,\"BALANCE_ACCOUNT_GREATER_0_5_SALARY\":true,\"CASH_LEVEL_EXPENSE\":\"LOW\",\"EPOCH\":1511964623196,\"FRAUD_CHECK\":"
					+ "false,\"RISK_EVENTS\":1,\"SALARY_CREDIT\":45000,\"TOTAL_CREDIT_GREATER_2X_SALARY\":false,\"TOTAL_CONTACTS_COUNT\":"
					+ "\"51\",\"TOTAL_SMS_COUNT\":\"51\"},\"PAN_CARD\":\""+panvalue+"\"}");
}
		else if(FlowType.equalsIgnoreCase("light_green")||FlowType.equalsIgnoreCase("dark_green"))
		{
			httprequest.body("{\"DATA\":{\"AVG_PRIMARY_ACCOUNT\":2600,\"BALANCE_ACCOUNT_GREATER_0_5_SALARY\":true,\"CASH_LEVEL_EXPENSE\":\"LOW\",\"EPOCH\":1511964623196,\"FRAUD_CHECK\":"
					+ "false,\"RISK_EVENTS\":1,\"SALARY_CREDIT\":45000,\"TOTAL_CREDIT_GREATER_2X_SALARY\":false,\"TOTAL_CONTACTS_COUNT\":"
					+ "\"51\",\"TOTAL_SMS_COUNT\":\"51\"},\"PAN_CARD\":\""+panvalue+"\"}");
		}
		httprequest.request(Method.POST,"/cv");
		assertEquals(Response.getStatusCode(), 200);
		System.out.println(Response.getBody().asString());
		return panvalue;
	}
}
